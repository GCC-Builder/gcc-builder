FROM fedora:latest

RUN dnf install -y \
        git-core \
        libtool \
        binutils \
        shtool \
        which \
        hostname \
        ccache \
        bc \
        gnupg \
        automake \
        autoconf \
        expat \
        python2 \
        libipt \
        zip \
        bison \
        gcc-c++ \
        glibc-devel \
        glibc-static \
        libstdc++-static \
        ncurses-devel \
        ncurses-compat-libs \
        file \
        make \
        m4 \
        flex-devel \
        flex \
        bison-devel \
        xz \
        texinfo \
        ca-certificates \
        diffutils \
        moreutils \
    && dnf clean all

RUN echo "maestroci" > /etc/hostname

RUN git config --global user.name baalajimaestro 
RUN git config --global user.email baalajimaestro@pixelexperience.org

RUN mkdir /build

COPY gcc_builder.sh /build

RUN git clone git://gcc.gnu.org/git/gcc.git -b releases/gcc-9 /build/gcc --depth=1

CMD bash /build/gcc_builder.sh aarch64-maestro-linux-gnu gcc-9 | ts '[%Y-%m-%d %H:%M:%S]'